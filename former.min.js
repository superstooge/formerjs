!function(){function b(a){var b=new XMLHttpRequest;b.open("GET",a,!0),b.onreadystatechange=function(){4==b.readyState&&"200"==b.status&&c.call(this,JSON.parse(b.responseText))}.bind(this),b.send(null)}function c(a){this.struc=a[0].fields,this.formAttributes=a[0],e.call(this)}function d(){for(var a in this.formAttributes)"fields"!==a&&this.formAttributes.hasOwnProperty(a)&&(this.formObj[a]=this.formAttributes[a]);this.namespace=window[this.formObj.namespace]||window}function e(){d.call(this);for(var a,b=0;b<this.struc.length;b++){a=this.parentEl;var c;switch(this.struc[b].type){case"select":c=document.createElement("select");for(var e=0;e<this.struc[b]["fjs-options"].length;e++){var g=document.createElement("option");g.data=this.struc[b]["fjs-options"][e].data,g.text=this.struc[b]["fjs-options"][e].text,this.struc[b]["fjs-options"][e].hasOwnProperty("selected")&&this.struc[b]["fjs-options"][e].selected===!0&&g.setAttribute("selected","selected"),c.appendChild(g)}break;case"textarea":c=document.createElement("textarea");break;case"label":c=document.createElement("label");break;default:c=document.createElement("input")}var h=this.struc[b];for(var i in h)h.hasOwnProperty(i)&&"fjs-"!==i.substr(0,4)&&c.setAttribute(i,h[i]);if("submit"===h.type&&c.addEventListener("click",f.bind(this)),void 0!==h["fjs-content"]&&(c.innerHTML=h["fjs-content"]),void 0!==h["fjs-parent"]&&(a=document.getElementById(h["fjs-parent"]),!a))return void console.error("Could not find element with ID",h["fjs-parent"]);"LABEL"===a.nodeName?a.insertBefore(c,a.firstChild):a.appendChild(c)}}function f(a){a.preventDefault(),a.stopPropagation();for(var b=!0,c=0;c<this.struc.length;c++){var d=this.struc[c];if("submit"!==this.struc[c].type.toLowerCase()&&"label"!==this.struc[c].type.toLowerCase()){var e=document.getElementById(this.struc[c].id);if(!e.hasAttribute("disabled")){if(d.hasOwnProperty("required")&&(""===e.value||e.options&&0===e.selectedIndex)&&(b=!1,d.hasOwnProperty("fjs-emptyFieldCallBack")&&this.namespace[d["fjs-emptyFieldCallBack"]](e),g.call(this)===!0))return void e.focus();if(d.hasOwnProperty("fjs-validate")&&""!==d["fjs-validate"]){try{b=this.namespace[d["fjs-validate"]](e)}catch(a){console.error("Error: function",this.namespace+"."+d["fjs-validate"],"is not defined")}if(!b&&g.call(this)===!0)return}}}}this.formObj.hasOwnProperty("onValidationComplete")&&this.namespace[this.formObj.onValidationComplete](b),b&&i.call(this)}function g(){return!(!this.formObj.hasOwnProperty("haltOnValidationError")||this.formObj.haltOnValidationError!==!0)||!this.formObj.hasOwnProperty("haltOnValidationError")}function h(){for(var a="",b=[],c=0;c<this.struc.length;c++)if("submit"!==this.struc[c].type.toLowerCase()&&"label"!==this.struc[c].type.toLowerCase()){var d=document.getElementById(this.struc[c].id);if(!d.hasAttribute("disabled")){var e=d.value;"checkbox"!==this.struc[c].type&&"radio"!==this.struc[c].type||(e=d.checked),b.push(encodeURIComponent(this.struc[c]["fjs-fieldName"]||this.struc[c].id)+"="+encodeURIComponent(e))}}return a=b.join("&").replace(/%20/g,"+")}function i(){var a=h.call(this),b=new XMLHttpRequest;b.onreadystatechange=function(){4==b.readyState&&200==b.status?(console.log(b.responseText),void 0!==this.formObj.submitSuccessCallBack&&this.namespace[this.formObj.submitSuccessCallBack]()):4==b.readyState&&b.status>=400&&void 0!==this.formObj.submitErrorCallBack&&this.namespace[this.formObj.submitErrorCallBack]()}.bind(this),b.open(this.formObj.method,this.formObj.action),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.send(a)}var a=function(a,d){if(this.parentEl=d||document.body,this.formObj={},"object"==typeof a)c(a);else if("string"==typeof a)try{c(JSON.parse(a))}catch(c){b.call(this,a)}};window.Former=a}();
